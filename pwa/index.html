<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hygiene & Cleaning Products Store</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Roboto:wght@700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=star" />
    <link rel="manifest" href="manifest.json" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://static-na.payments-amazon.com/OffAmazonPayments/us/js/Widgets.js"></script>

    <style>
      /* Apply Inter font to the body as the default font family */
      body {
        font-family: 'Inter', sans-serif;
      }
      /* Apply Roboto font to heading elements (h1 to h6) */
      h1, h2, h3, h4, h5, h6 {
        font-family: 'Roboto', sans-serif;
      }

      /* --- Custom CSS for Chatbot Widget --- */
      /* Base styles and transitions for the main chatbot container */
      #chatbot {
          transition: height 0.3s ease, opacity 0.3s ease, transform 0.3s ease; /* Smooth transitions for changes */
          display: flex; /* Use flexbox to arrange children (header, messages, form) vertically */
          flex-direction: column; /* Stack children vertically */
          height: 4rem; /* Default collapsed height (should match header height) */
          opacity: 1; /* Default visible state */
          transform: translateY(0); /* Default position (no transformation) */
          /* By default, the chatbot is hidden using `style="display: none;"` in the HTML.
             When shown by JS, display becomes 'flex'. */
      }

      /* Styles for the chatbot when it is NOT in the 'expanded' state (collapsed) */
      #chatbot:not(.expanded) {
          /* When collapsed, explicitly hide the messages area and the input form */
          #chatbot-messages, #chatbot-form {
              display: none;
          }
          /* Optional: Add border-radius only to the top when collapsed */
           border-bottom-left-radius: 0;
           border-bottom-right-radius: 0;
      }

      /* Styles for the chatbot when it IS in the 'expanded' state */
       #chatbot.expanded {
           height: 24rem; /* Example expanded height (adjust as needed) */
           max-height: 80vh; /* Prevent it from getting too tall on smaller screens */
            /* When expanded, ensure messages area and form are displayed */
           #chatbot-messages, #chatbot-form {
               display: flex; /* Use flex for messages/form layout */
           }
            /* Ensure the messages area grows to fill available space */
           #chatbot-messages {
               flex-grow: 1;
               /* Additional flex properties might be needed depending on layout inside */
           }
            /* Ensure the form stays at the bottom */
           #chatbot-form {
               flex-shrink: 0; /* Prevent form from shrinking */
           }
            /* Reset border-radius when expanded */
           border-radius: 0.75rem; /* Or the value defined by Tailwind class rounded-xl */
       }

       /* Ensure the chatbot messages area scrolls if content overflows vertically */
       #chatbot-messages {
           overflow-x: hidden; /* Hide horizontal scrollbar */
           overflow-y: auto; /* Enable vertical scrollbar */
           white-space: normal; /* Allow wrapping */
           padding: 1rem; /* Example padding, adjust as needed */
           display: flex; /* Use flexbox for vertical layout */
           flex-direction: column; /* Arrange chat bubbles vertically */
           gap: 0.5rem; /* Add spacing between chat bubbles */
       }
       /* Reset default padding from Tailwind if needed, e.g., .p-4 */
       #chatbot-messages.p-4 { padding: 1rem; }


       /* --- Custom CSS for Utility Classes --- */
       /* CSS for the clearfix utility class, used to clear floats */
       .clearfix::after {
          content: ""; /* Required for clearfix */
          display: table; /* Required for clearfix */
          clear: both; /* Clears both left and right floats */
       }

        /* --- CSS for Animations --- */
        /* Keyframes for the fadeIn animation, used for chat messages */
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); } /* Start invisible and slightly down */
          to { opacity: 1; transform: translateY(0); } /* End fully visible in original position */
        }
        /* Apply the fadeIn animation to elements with this class */
        .animate-fadeIn {
          animation: fadeIn 0.3s ease forwards; /* Apply animation over 0.3s with ease timing, keep final state */
        }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen flex flex-col">
    <header class="bg-white shadow p-4 text-center flex flex-col max-w-screen-xl mx-auto space-y-4">
      <div class="flex flex-col items-center space-y-2">
        <h1 class="text-2xl font-semibold text-gray-800">Hygiene & Cleaning Products</h1>
        <div class="flex space-x-4">
          <a href="#" aria-label="Share on Facebook" id="share-facebook" class="text-blue-600 hover:text-blue-800" target="_blank" rel="noopener noreferrer"><span class="material-icons">facebook</span></a>
          <a href="#" aria-label="Share on Twitter" id="share-twitter" class="text-blue-400 hover:text-blue-600" target="_blank" rel="noopener noreferrer"><span class="material-icons">twitter</span></a>
          <a href="#" aria-label="Share on WhatsApp" id="share-whatsapp" class="text-green-500 hover:text-green-700" target="_blank" rel="noopener noreferrer"><span class="material-icons">whatsapp</span></a>
          <a href="#" aria-label="Share on LinkedIn" id="share-linkedin" class="text-blue-700 hover:text-blue-900" target="_blank" rel="noopener noreferrer"><span class="material-icons">linkedin</span></a>
        </div>
      </div>
      <div id="top-ad" class="w-full bg-yellow-100 border border-yellow-300 rounded p-4 text-center text-yellow-800 font-semibold">
        Your Ad Here - Promote Your Products!
      </div>
    </header>

    <main class="flex-grow container mx-auto p-4 max-w-screen-xl flex flex-col items-center pb-32">
      <div id="product-slider" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 scrollbar-hide snap-x snap-mandatory scroll-smooth justify-center">
        </div>
      <div id="mid-ad" class="w-full bg-yellow-100 border border-yellow-300 rounded p-4 mt-6 text-center text-yellow-800 font-semibold max-w-screen-xl animate-bounce">
        Your Ad Here - Special Offers!
      </div>
      </main>

    <div id="popup-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50" role="dialog" aria-modal="true" aria-labelledby="popup-title" aria-describedby="popup-desc">
      <div class="bg-white rounded-lg max-w-3xl w-full p-6 relative shadow-lg overflow-y-auto max-h-[80vh]">
        <button id="popup-close" aria-label="Close popup" class="absolute top-2 right-2 text-gray-600 hover:text-gray-900 text-2xl font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500">×</button>
        <div id="popup-content" class="overflow-auto">
          <h2 id="popup-title" class="sr-only">Popup Title</h2> <div id="popup-desc" class="sr-only">Popup content description</div> </div>
      </div>
    </div>

    <div id="chatbot" class="fixed bottom-4 right-4 w-80 max-w-full bg-white rounded-xl shadow-2xl border border-gray-300 overflow-hidden z-50" style="display: none;">
      <div class="bg-indigo-600 text-white p-4 flex justify-between items-center cursor-pointer select-none" id="chatbot-header" role="button" aria-expanded="false" aria-controls="chatbot-messages" tabindex="0">
        <h2 class="text-lg font-semibold">Help Chat</h2>
        <button id="chatbot-close" aria-label="Close chatbot" class="text-white text-2xl font-bold focus:outline-none focus:ring-2 focus:ring-white rounded">×</button>
      </div>
      <div id="chatbot-messages" class="flex-grow p-4 overflow-y-auto text-sm text-gray-900 bg-gray-50 space-y-2" role="log" aria-live="polite" aria-relevant="additions">
           </div>
      <form id="chatbot-form" class="p-4 border-t border-gray-300 flex space-x-2">
        <input type="text" id="chatbot-input" class="flex-grow border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Ask me about products..." aria-label="Chat input" autocomplete="off" />
        <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition flex items-center justify-center">
          <span class="material-icons">send</span> </button>
      </form>
    </div>

    <div id="subscription-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50">
      <div class="bg-white rounded-xl max-w-md w-full p-6 relative shadow-lg">
        <button id="subscription-close" aria-label="Close subscription modal" class="absolute top-3 right-3 text-gray-600 hover:text-gray-900 text-2xl font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500">×</button>
        <h2 class="text-xl font-bold mb-4 text-center text-indigo-700">Subscribe to Get Early Deals</h2>
        <form id="subscription-form" class="space-y-4">
          <div>
            <label for="subscription-email" class="block text-gray-700 font-semibold mb-1">Email Address</label>
            <input type="email" id="subscription-email" name="email" required class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="you@example.com" />
          </div>
          <div>
            <label for="subscription-whatsapp" class="block text-gray-700 font-semibold mb-1">WhatsApp Number</label>
            <input type="tel" id="subscription-whatsapp" name="whatsapp" required class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="+1234567890" />
          </div>
          <div class="flex items-center space-x-2">
            <input type="checkbox" id="subscription-terms" name="terms" checked required class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500" />
            <label for="subscription-terms" class="text-gray-600 text-sm select-none">I agree to the <a href="#" class="text-indigo-600 underline">Terms and Conditions</a></label>
          </div>
          <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700 transition">Subscribe</button>
        </form>
        <p id="subscription-message" class="mt-3 text-center text-sm text-green-600 hidden"></p>
      </div>
    </div>

    <script src="subscription.js"></script>

    <!-- Bookmark Button (fixed bottom left) -->
    <button
      id="bookmark-button"
      aria-label="Bookmark this page"
      class="fixed bottom-20 left-6 bg-indigo-600 text-white p-3 rounded-full shadow-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 z-50"
      title="Bookmark this page"
    >
      <span class="material-symbols-outlined">
        star
      </span>
    </button>

    <!-- Notification Popup -->
    <div
      id="bookmark-notification"
      class="fixed bottom-32 left-6 bg-green-600 text-white px-4 py-2 rounded shadow-lg opacity-0 pointer-events-none transition-opacity duration-500 z-50"
      role="alert"
      aria-live="assertive"
    >
      Product bookmarked!
    </div>

    <script type="module">
        import { REVIEWS_POPUP_AD_URL, TOP_ADS, TOP_DISPLAY_TIMES, BOTTOM_ADS, BOTTOM_DISPLAY_TIMES } from './adConfig.js';
    </script>
    <script type="module" src="./chatbot.js"></script>
    <script type="module" src="./bookmark.js"></script>

    <footer class="bg-white shadow p-4 text-center text-gray-600 text-xs max-w-screen-xl mx-auto flex flex-col items-center">
      <p class="mt-1 text-gray-500 max-w-md mx-auto">
        This site participates in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for sites to earn advertising fees by advertising and linking to Amazon.com. All product prices and availability are subject to change. Product information is sourced from Amazon and other affiliate partners.
      </p>
      <div id="footer-links" class="mt-4 space-x-4">
        <a href="https://example.com/about" class="text-indigo-600 hover:underline" onclick="openLinkBehind(event, this.href)">About</a>
        <a href="https://example.com/terms" class="text-indigo-600 hover:underline" onclick="openLinkBehind(event, this.href)">Terms of Use</a>
        <a href="https://example.com/unsubscribe" class="text-indigo-600 hover:underline" onclick="openLinkBehind(event, this.href)">Unsubscribe</a>
      </div>
      <div class="mt-4 flex items-center justify-center space-x-2">
          <span>© 2024 Hygiene & Cleaning Products Affiliate Store</span>
          <img src="https://flagcdn.com/us.svg" alt="USA Flag" class="w-5 h-3 inline-block" />
      </div>
    </footer>

    <script>
      /**
       * Attempts to open a given URL in a new browser tab, ideally in the background.
       * This provides a less intrusive way to open external links.
       * If opening a new tab is blocked by the browser's popup blocker, it falls back to navigating the current tab.
       * @param {Event} event - The click event object from the anchor tag that triggered this function.
       * @param {string} url - The URL string that should be opened.
       */
      function openLinkBehind(event, url) {
        event.preventDefault(); // Prevent the browser's default action for the link (which is usually to navigate the current tab).

        // Attempt to open the specified URL in a new browser tab.
        // Using '_blank' as the window name tells the browser to open a new, unnamed tab or window.
        const newTab = window.open(url, '_blank');

        // Check if the `window.open` call successfully returned a reference to the new window/tab.
        // If a popup blocker prevented opening the new tab, `window.open` will typically return null.
        if (newTab) {
          // If the new tab was successfully opened:
          newTab.blur(); // Attempt to remove focus from the newly opened tab. This is part of trying to send it to the background.
          window.focus(); // Attempt to bring focus back to the current browser window.
           console.log(`Attempted to open link in background tab: ${url}`); // Log the action.
        } else {
            // If `window.open` returned null (likely due to a popup blocker):
            // Fall back to navigating the current browser tab to the specified URL.
             console.warn(`Failed to open link in background tab (possibly due to popup blocker). Navigating current tab directly to: ${url}`); // Log a warning about the fallback.
             window.location.href = url; // Navigate the current window's location to the URL.
        }
      }
    </script>

    <script type="module">
      // Import the VisitorCountBubble class from its module file.
      // The path './visitorCountBubble.js' is relative to the directory containing this HTML file.
      // Adjust the path if your visitorCountBubble.js file is located elsewhere (e.g., '../js/visitorCountBubble.js').
      import VisitorCountBubble from './visitorCountBubble.js'; // Make sure this path is correct relative to index.html

      // Initialize a new instance of the VisitorCountBubble.
      // The latest version of the VisitorCountBubble script is designed to append its elements (the bubble, image, tooltip)
      // directly to the document body when initialized and does NOT require a container element ID passed to the constructor.
      // Pass the desired initial visitor count (e.g., 10) as the constructor argument.
       console.log('Initializing VisitorCountBubble...');
      const visitorBubble = new VisitorCountBubble(10); // Initialize with a starting count (e.g., 10 visitors)
       console.log('VisitorCountBubble initialized.');

      // Set up a timer to periodically increment the visitor count displayed by the bubble.
      // This simulates new visitors arriving over a set time interval.
       console.log('Starting visitor count increment timer.');
      setInterval(() => {
        // Call the `increment` method on the `visitorBubble` instance.
        // This method updates the displayed count and triggers any associated animations.
        visitorBubble.increment();
         // You can uncomment the line below for more frequent console logging, showing every increment.
         // console.log('Visitor count incremented by timer.');
      }, 5000); // The interval duration in milliseconds (5000ms = 5 seconds). Adjust this value to change how often the count increases.


    </script>


    <script type="module" src="main.js"></script>

    </body>
</html>
